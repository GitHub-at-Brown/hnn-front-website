<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
        <title>
            HNN
        </title>
        <!-- <base href="/website_redesign/"> -->
        <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400&display=swap" rel="stylesheet"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
        <link href="styles.css" rel="stylesheet"/>
    </head>
    <body>
        <div id="main">
            <div class="topbar">
                <div id="topbar-wrapper">
                    <div class="hamburger" onclick="toggleMobileMenu()">
                        ☰
                    </div>
                    <div class="links">

                        <a href="homepage.html" class="home-link">
                            <div class="home-icon-container">
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="24" 
                                    height="24"
                                    viewBox="0 0 24 24" 
                                    class="home-icon">
                                    <path
                                        d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"
                                    />
                                </svg>
                            </div>
                        </a>
                        <a href="https://jonescompneurolab.github.io/hnn-core/stable/install.html">
                            Install
                        </a>
                        <a href="https://dylansdaniels.github.io/website_redesign/content/preface.html">
                            Tutorials
                        </a>
                        <a href="https://jonescompneurolab.github.io/hnn-core/stable/index.html">
                            Documentation
                        </a>
                        <a href="contact.html">
                            Contact
                        </a>
                    </div>
                    <!-- Right side of topbar-->
                    <div class="topbar-right">
                        <div class="dropdown">
                            <button class="dropdown-button" id="dropdownButton">
                                <span class="dropdown-text">
                                    <span>
                                        More
                                    </span>
                                    <span class="caret">
                                    </span>
                                </span>
                            </button>
                            <div class="dropdown-content">
                                <a href="developers.html">
                                    Developers
                                </a>
                                <a href="publications.html">
                                    <!-- <span class="external-icon"></span> -->
                                    Publications
                                </a>
                                <a href="https://github.com/jonescompneurolab/hnn-core/discussions/categories/announcements">
                                    <!-- <span class="external-icon"></span> -->
                                    Announcements
                                </a>
                            </div>
                        </div>
                        <div class="social-icons">
                            <a aria-label="GitHub" href="https://github.com/jonescompneurolab/hnn-core" target="_blank">
                                <img alt="GitHub" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/icons/github.png"/>
                            </a>
                            <a aria-label="BlueSky" href="https://bsky.app/profile/hnnsolver.bsky.social" target="_blank">
                                <img alt="BlueSky" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/icons/bluesky.png"/>
                            </a>
                            <a aria-label="LinkedIn" href="https://www.linkedin.com/company/human-neocortical-neurosolver/" target="_blank">
                                <img alt="LinkedIn" src="https://raw.githubusercontent.com/jonescompneurolab/jones-website/master/images/frontpage/icons/linkedin.png"/>
                            </a>
                        </div>
                    </div>
                    <div id="mobile-menu" class="mobile-menu">
                        <div class="links">
                            <a href="homepage.html" class="home-link">
                                Home
                            </a>
                            <a href="https://jonescompneurolab.github.io/hnn-core/stable/install.html">
                                Install
                            </a>
                            <a href="https://dylansdaniels.github.io/website_redesign/content/preface.html">
                                Tutorials
                            </a>
                            <a href="https://jonescompneurolab.github.io/hnn-core/stable/index.html">
                                Documentation
                            </a>
                            <a href="contact.html">
                                Contact
                            </a>
                            <a href="developers.html">
                                Developers
                            </a>
                            <a href="publications.html">
                                Publications
                            </a>
                            <a href="https://github.com/jonescompneurolab/hnn-core/discussions/categories/announcements">
                                Announcements
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div id="content-wrapper">
                <div id="content">
                    <br>
                    <h2 style="text-align: center;">
                        Contact Us
                    </h2>
                    <h3>Research Consultations</h3>
                    <p>
                        If you have an idea for using HNN in your research, but would like some advice and individualized consultation on your project, please sign up for a <a href="https://calendar.app.google/2L8FZ9XxGuGVh5Hm6">consultation office hour with Dr. Stephanie Jones</a>. Note that these meeting are <b>not</b> for technical support.
                    </p>
                    <h3>Technical Support</h3>
                    <p>
                        Please log your question on the <a href="https://github.com/jonescompneurolab/hnn-core/discussions">Community Discussion Board</a>, and someone from the team will get back to you shortly.
                    </p>
                    <h3>Staying Up-to-date with HNN</h3>
                    <p>
                        Follow us on <a href="https://bsky.app/profile/hnnsolver.bsky.social">Bluesky</a>, <a href="https://www.linkedin.com/company/human-neocortical-neurosolver/?viewAsMember=true">LinkedIn</a>, or <a href="https://x.com/HNNsolver">X</a>! 
                    </p>
                    <br><br>
                </div> <!-- close content -->
            </div> <!-- close content wrapper -->

        </div> <!-- close main -->
            
        <script>

            // ----------------------- //
            // ---- Dropdown Menu ---- //
            // ----------------------- //

            // E.g.: if open, close it; if closed, open it
            function toggleDropdown() {
                const dropdownContent = document.querySelector('.dropdown-content');
                dropdownContent.style.display =
                    dropdownContent.style.display === 'block' ? 'none' : 'block';
            }

            // Toggle the dropdown when clicking the dropdownButton
            document.addEventListener('DOMContentLoaded', () => {
                document
                    .getElementById('dropdownButton')
                    .addEventListener('click', event => {
                        // stopPropagation ensures the button click only toggles the 
                        // dropdown and doesn’t also trigger the outside-click handler 
                        // that would close it.
                        event.stopPropagation();
                        toggleDropdown();
                    });
            });

            // Close the dropdown if clicking anywhere outside the dropdown
            window.addEventListener('click', event => {
                if (!event.target.closest('.dropdown')) {
                    document.querySelector('.dropdown-content').style.display = 'none';
                }
            });

            // -------------------- //
            // --- Mobile Menu --- //
            // -------------------- //

            // Function to toggle mobile menu
            // ------------------------------
            function toggleMobileMenu() {
                const menu = document.getElementById("mobile-menu");
                const hamburger = document.querySelector(".hamburger");
                const isVisible = menu.style.display === "flex";

                menu.style.display = isVisible ? "none" : "flex";
                hamburger.classList.toggle("menu-open", !isVisible);
            }

            // Close the menu if clicking anywhere 
            // outside of the menu or hamburger
            // ------------------------------
            document.addEventListener("click", function(event) {
                const menu = document.getElementById("mobile-menu");
                const hamburger = document.querySelector(".hamburger");
                
                // Check if the click is outside of the hamburger and menu
                if (!menu.contains(event.target) && !hamburger.contains(event.target)) {
                    menu.style.display = "none";
                    hamburger.classList.remove("menu-open");
                }
            });

            // Close the menu on window resize 
            // ------------------------------
            // Note: triggered if the width is greater than 650px

            window.addEventListener("resize", function() {
                if (window.innerWidth > 650) {
                    const menu = document.getElementById("mobile-menu");
                    menu.style.display = "none"; // Close the menu if resizing above 650px
                }
            });

            // Enable topbar to scroll with page
            // ------------------------------
            window.addEventListener('scroll', () => {
                const scrollX = window.scrollX;
                document.querySelector('.topbar').style.transform = `translateX(${-scrollX}px)`;
            });
        </script>

        <script>
            // ------------------- //
            // --- Card Popups --- //
            // ------------------- //
            const cards = document.querySelectorAll('.card');
            const popups = document.querySelectorAll('.popup-container');

            // Show popup on card click
            cards.forEach(card => {
                card.addEventListener('click', () => {
                    const popupId = card.getAttribute('data-popup');
                    const popup = document.getElementById(popupId);
                    if (popup) {
                        popup.classList.add('show'); // add 'show' class to display the popup
                        document.body.style.overflow = 'hidden'; // disable body scrolling

                        // Reset scroll position when the popup is opened
                        const popupBox = popup.querySelector('.popup-box');
                        if (popupBox) {
                            popupBox.scrollTop = 0; // Set scroll position to the top
                        }
                    }
                });
            });

            // Close popup on close button click
            document.querySelectorAll('.popup-close').forEach(button => {
                button.addEventListener('click', () => {
                    const popupContainer = button.closest('.popup-container');
                    if (popupContainer) {
                        popupContainer.classList.remove('show'); // Remove 'show' class to hide the popup
                        document.body.style.overflow = ''; // Re-enable body scrolling
                    }
                });
            });

            // Close popup on outside click
            popups.forEach(popup => {
                popup.addEventListener('click', (e) => {
                    if (e.target === popup) { // Check if the click is outside the popup content
                        popup.classList.remove('show'); // Remove 'show' class to hide the popup
                        document.body.style.overflow = ''; // Re-enable body scrolling
                    }
                });
            });
        </script>

        <script>
            // ----------------------- //
            // --- Developer Table --- //
            // ----------------------- //

            // get GitHub images //
            // ----------------- //
            // Load images from repo, fallback to GitHub if not found
            document.querySelectorAll('img[data-github]').forEach(img => {
                const user = img.getAttribute('data-github');
                if (!user) {
                    img.src = 'default.png'; // fallback image
                    return;
                }

                const repoURL = `https://raw.githubusercontent.com/jonescompneurolab/jones-website/refs/heads/master/images/developers/${user}.png`;
                const githubURL = `https://github.com/${user}.png`;

                const testImage = new Image();
                testImage.onload = () => {
                    img.src = repoURL;
                };
                testImage.onerror = () => {
                    img.src = githubURL;
                };
                testImage.src = repoURL;
            });

            // image tooltips for additional contributors
            document.querySelectorAll('.dev-grid.additional img[data-github]').forEach(img => {
                img.addEventListener('mouseenter', () => {
                    const altText = img.alt; // Get alt text of the image
                    if (!altText) return; // No alt text, no tooltip
                    
                    // Create the tooltip div
                    const tooltip = document.createElement('div');
                    tooltip.classList.add('name-tooltip');
                    tooltip.innerText = altText; // Set the tooltip text to the alt text
                    document.body.appendChild(tooltip);
                    
                    // Position the tooltip
                    const rect = img.getBoundingClientRect();
                    tooltip.style.position = 'absolute';
                    tooltip.style.left = `${rect.left + window.scrollX}px`;
                    tooltip.style.top = `${rect.bottom + window.scrollY + 4}px`; // Small gap below the image
                    
                    // Fade in the tooltip
                    requestAnimationFrame(() => {
                        tooltip.style.opacity = '1';
                    });
                    
                    // Hide tooltip when mouse leaves
                    img.addEventListener('mouseleave', () => {
                        tooltip.remove();
                    });
                });
            });


            // Set section width //
            // ----------------- //
            window.addEventListener("load", () => {
                const activeCards = document.querySelectorAll(".dev-grid:not(.inactive) .dev-card");

                activeCards.forEach(card => {
                    const name = card.querySelector('.name');
                    const image = card.querySelector('img');

                    const imageWidth = image.offsetWidth;
                    const nameScrollWidth = name.scrollWidth;
                    const baseWidth = Math.max(imageWidth, 0); // fallback in case

                    if (nameScrollWidth > baseWidth) {
                        // Name is wider than image → expand card
                        card.style.width = `${nameScrollWidth + 20}px`;
                    } else {
                        // Otherwise match image width (plus padding if you want)
                        card.style.width = `${imageWidth + 20}px`;
                    }
                });
            });

            // Tooltips for names and positions //
            // --------------------------------- //
            document.querySelectorAll('.dev-card .name, .dev-card .position').forEach(textElement => {
                const originalText = textElement.textContent;  // Store the original text
                const checkOverflow = () => {
                    // Check if the text is overflowing
                    const isOverflowing = textElement.scrollWidth > textElement.clientWidth;

                    if (isOverflowing && !textElement.querySelector('a')) {
                        // Create the anchor tag when the text overflows
                        const anchor = document.createElement('a');
                        anchor.setAttribute('href', 'javascript:void(0)');
                        anchor.setAttribute('tabindex', '-1');
                        anchor.setAttribute('name-tooltip', originalText);
                        anchor.textContent = originalText;
                        textElement.innerHTML = '';  // Clear the text element
                        textElement.appendChild(anchor);
                    } else if (!isOverflowing && textElement.querySelector('a')) {
                        // Remove the anchor tag if the text is no longer overflowing
                        textElement.innerHTML = originalText;  // Restore original text
                    }
                };

                // Check overflow initially and on window resize
                window.addEventListener('load', checkOverflow);
                window.addEventListener('resize', checkOverflow);
            });

            (() => {
                let tooltipVisible = false;

                // Delegate hover events
                document.addEventListener('mouseenter', (e) => {
                    const link = e.target.closest('.dev-card .name a[name-tooltip], .dev-card .position a[name-tooltip]');
                    if (!link) return;
                    if (tooltipVisible) return;

                    link._tt = setTimeout(() => {
                        document.querySelectorAll('.name-tooltip').forEach(t => t.remove());

                        const tip = document.createElement('div');
                        tip.className = 'name-tooltip';
                        tip.innerText = link.getAttribute('name-tooltip');
                        document.body.appendChild(tip);

                        const r = link.getBoundingClientRect();
                        tip.style.position = 'absolute';
                        tip.style.left = `${r.left + window.scrollX}px`;
                        tip.style.top = `${r.bottom + window.scrollY + 4}px`;

                        requestAnimationFrame(() => { tip.style.opacity = '1'; });
                        tooltipVisible = true;
                    }, 300);  // 300ms delay
                }, true);

                document.addEventListener('mouseleave', (e) => {
                    const link = e.target.closest('.dev-card .name a[name-tooltip], .dev-card .position a[name-tooltip]');
                    if (!link) return;

                    clearTimeout(link._tt);
                    document.querySelectorAll('.name-tooltip').forEach(t => t.remove());
                    tooltipVisible = false;
                }, true);
            })();
        </script>